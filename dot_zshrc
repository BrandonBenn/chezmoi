bindkey -e
typeset -U PATH path
path=(~/bin "$path[@]")
export PATH

export PROMPT_COMMAND='history -a'
export HISTCONTROL="erasedups:ignoreboth"
export HISTTIMEFORMAT='%F %T '
export HISTIGNORE="&:[ ]*:exit:ls:bg:fg:history"
export HISTSIZE=500000
export HISTFILESIZE=100000
export SAVEHIST=$HISTSIZE
export HISTFILE=~/.cache/zsh_history
setopt hist_ignore_all_dups
setopt hist_ignore_space

autoload -Uz compinit && compinit
zstyle ':completion:*' menu select
zstyle ':completion::complete:*' gain-privileges 1

autoload -U edit-command-line
zle -N edit-command-line
bindkey '^x^e' edit-command-line

. /usr/share/zsh/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh ||:
. /etc/profile.d/autojump.sh ||:

PROMPT='%F{gray}%B%~%b%f %# '

rm() { trash "$@"; }
cd() { builtin cd "$@" && command ls -F --color=auto; }
ls() { printf "${PWD}\n" && command ls -F --color=auto "$@"; }
pacman() { sudo pacman "$@"; }
e() { emacsclient -c -a "emacs" "$@" & disown; }

eval "$(rbenv init -)"
